(this.webpackJsonpnextbus=this.webpackJsonpnextbus||[]).push([[0],{10:function(e,t,a){e.exports=a(23)},15:function(e,t,a){},17:function(e,t,a){},23:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),s=a.n(c),o=(a(15),a(2)),i=a.n(o),u=a(5),l=(a(17),{accessToken:"",expires:null}),m=function(e,t){var a,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(d()){r.next=3;break}return r.next=3,i.a.awrap(f());case 3:return r.next=5,i.a.awrap(p(e,t));case 5:if(401!==(n=r.sent).status){r.next=12;break}return r.next=9,i.a.awrap(f());case 9:return r.next=11,i.a.awrap(p(e,t));case 11:n=r.sent;case 12:if(200!==n.status){r.next=17;break}return r.next=15,i.a.awrap(n.json());case 15:return a=r.sent,r.abrupt("return",a.DepartureBoard.Departure);case 17:return r.abrupt("return",a);case 18:case"end":return r.stop()}}))},p=function(e,t){var a,n,r,c,s;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return a=v(),n=a.date,r=a.time,c="https://api.vasttrafik.se/bin/rest.exe/v2/departureBoard?id=".concat(e,"&direction=").concat(t,"&date=").concat(n,"&time=").concat(r,"&format=json"),o.next=4,i.a.awrap(fetch(c,{method:"GET",headers:{Authorization:"Bearer ".concat(l.accessToken)}}));case 4:return s=o.sent,o.abrupt("return",s);case 6:case"end":return o.stop()}}))},d=function(){return!!l.accessToken&&!(l.expires&&l.expires<new Date)},f=function(){var e,t,a;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(b());case 2:e=n.sent,t=h(e.expires_in),a=e.access_token,l={accessToken:a,expires:t};case 6:case"end":return n.stop()}}))},h=function(e){var t=new Date;return t.setSeconds(t.getSeconds()+e),t},b=function(){var e,t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(fetch("https://api.vasttrafik.se:443/token",{headers:{Authorization:"Basic ".concat("T0hDc2txdEp6cDhMYlVmRjhsaWVfeERHdDBBYTp6ME5wWWY3dlYxbUFhTEVFbkdyRFprTGEwODBh"),"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:"grant_type=client_credentials"}));case 2:return e=a.sent,a.next=5,i.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",t);case 7:case"end":return a.stop()}}))},v=function(){var e=new Date;return{date:e.toISOString().substr(0,10),time:e.toTimeString().substr(0,5)}},w={name:"Partille Port",id:"9022014013213001"},E={name:"G\xf6teborg Nordstan",id:"9021014004945000"},x=function(e){var t=e.timeTable,a=t[0].time,n=t[0].rtTime;return r.a.createElement("div",{className:"TheTime"},r.a.createElement("div",{className:"TheTimeBlock"}),r.a.createElement("div",{className:"TheTimeBlock"},r.a.createElement("h1",{className:"nextBusTime"},a)),r.a.createElement("div",{className:"TheTimeBlock"},r.a.createElement("h2",{className:"realTime"},"(",n,")")))},T=a(3),k=a(4),N=function(e){var t=e.timeTable;return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement(T.a,{className:"busIcon",icon:k.a}),t[1].time),r.a.createElement("p",null,r.a.createElement(T.a,{className:"busIcon",icon:k.a}),t[2].time),r.a.createElement("p",null,r.a.createElement(T.a,{className:"busIcon",icon:k.a}),t[3].time))},B=function(e){var t=e.handleSwap,a=e.from,n=e.destination;return r.a.createElement("div",{className:"fromToWrapper"},r.a.createElement("div",{className:"fromTo"},r.a.createElement("h3",{className:"from",onClick:t},a.name)," ",r.a.createElement(T.a,{className:"exchangeArrows",onClick:t,icon:k.b}),r.a.createElement("h3",{className:"to"},n.name)))};var j=function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(w),o=Object(u.a)(s,2),l=o[0],p=o[1],d=Object(n.useState)(E),f=Object(u.a)(d,2),h=f[0],b=f[1],v=Object(n.useCallback)((function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(m(l.id,h.id));case 2:e=t.sent,c(e);case 4:case"end":return t.stop()}}))}),[l,h]);return Object(n.useEffect)((function(){v()}),[v]),r.a.createElement(n.Fragment,null,a?r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"TimeTable"},r.a.createElement(x,{timeTable:a}),r.a.createElement(N,{timeTable:a})),r.a.createElement(B,{handleSwap:function(){var e=l;p(h),b(e)},from:l,destination:h})):"")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.8f462401.chunk.js.map