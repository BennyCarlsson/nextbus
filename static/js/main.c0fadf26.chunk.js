(this.webpackJsonpnextbus=this.webpackJsonpnextbus||[]).push([[0],{10:function(e,t,n){e.exports=n(23)},15:function(e,t,n){},17:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(9),s=n.n(c),o=(n(15),n(2)),i=n.n(o),u=n(3),p=(n(17),{accessToken:"",expires:null}),l=function(e,t){var n,a;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(f()){r.next=3;break}return r.next=3,i.a.awrap(m());case 3:return r.next=5,i.a.awrap(d(e,t));case 5:if(401!==(a=r.sent).status){r.next=12;break}return r.next=9,i.a.awrap(m());case 9:return r.next=11,i.a.awrap(d(e,t));case 11:a=r.sent;case 12:if(200!==a.status){r.next=17;break}return r.next=15,i.a.awrap(a.json());case 15:return n=r.sent,r.abrupt("return",n.DepartureBoard.Departure);case 17:return r.abrupt("return",n);case 18:case"end":return r.stop()}}))},d=function(e,t){var n,a,r,c,s;return i.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=x(),a=n.date,r=n.time,c="https://api.vasttrafik.se/bin/rest.exe/v2/departureBoard?id=".concat(e,"&direction=").concat(t,"&date=").concat(a,"&time=").concat(r,"&format=json"),o.next=4,i.a.awrap(fetch(c,{method:"GET",headers:{Authorization:"Bearer ".concat(p.accessToken)}}));case 4:return s=o.sent,o.abrupt("return",s);case 6:case"end":return o.stop()}}))},f=function(){return!!p.accessToken&&!(p.expires&&p.expires<new Date)},m=function(){var e,t,n;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(w());case 2:e=a.sent,t=h(e.expires_in),n=e.access_token,p={accessToken:n,expires:t};case 6:case"end":return a.stop()}}))},h=function(e){var t=new Date;return t.setSeconds(t.getSeconds()+e),t},w=function(){var e,t;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(fetch("https://api.vasttrafik.se:443/token",{headers:{Authorization:"Basic ".concat("T0hDc2txdEp6cDhMYlVmRjhsaWVfeERHdDBBYTp6ME5wWWY3dlYxbUFhTEVFbkdyRFprTGEwODBh"),"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:"grant_type=client_credentials"}));case 2:return e=n.sent,n.next=5,i.a.awrap(e.json());case 5:return t=n.sent,n.abrupt("return",t);case 7:case"end":return n.stop()}}))},x=function(){var e=new Date;return{date:e.toISOString().substr(0,10),time:e.toTimeString().substr(0,5)}},b={name:"Partille Port",id:"9022014013213001"},v={name:"G\xf6teborg Nordstan",id:"9021014004945000"},k=n(5),E=n(7);var T=function(){var e=Object(a.useState)(),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(b),o=Object(u.a)(s,2),p=o[0],d=o[1],f=Object(a.useState)(v),m=Object(u.a)(f,2),h=m[0],w=m[1],x=Object(a.useCallback)((function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(l(p.id,h.id));case 2:e=t.sent,c(e);case 4:case"end":return t.stop()}}))}),[p,h]);Object(a.useEffect)((function(){x()}),[x]);var T=function(){var e=p;d(h),w(e)};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h2",null,n&&n[0].time," (",n&&n[0].rtTime,")"),r.a.createElement("p",null,n&&n[1].time),r.a.createElement("p",null,n&&n[2].time),r.a.createElement("p",null,n&&n[3].time),r.a.createElement("h3",{onClick:T},p.name," ",r.a.createElement(k.a,{icon:E.a})," ",h.name),r.a.createElement(k.a,{className:"exchangeArrows",onClick:T,icon:E.b})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.c0fadf26.chunk.js.map